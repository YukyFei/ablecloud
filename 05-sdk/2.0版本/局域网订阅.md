#iOS-sdk2.0 局域网订阅
###订阅逻辑
> ####1.App端设置订阅回调
	/**
	 设备局域网推送数据回调
	 @param handler 设备推送数据
	 */
	+ (void)setLocalPushDataHandler:(void(^)(ACLocalDevice *device, NSData *msg))handler;
>
	/**
	 设备局域网设备上下线回调
	 @param handler 设备上下线状态
	 */
	+ (void)setLocalOnlineStatusHandler:(void(^)(ACLocalDevice *device, BOOL online))handler;
>


> ####2. App端发起订阅
	/**
	 * 发起订阅指令，监测设备在线状态
	 */
	+ (void)startLocalPush;
> 1. 每隔`60s`发起一次订阅请求(发送广播)，重复发送订阅请求，是因为每次订阅的设备上报周期是`180s`，需要续订。为了保证续订成功，每60s续订一次。
> 2. 监听8690端口，解析设备上报数据。上报数据解析：
> 	- 如果是新设备，则添加到本地维护的一个`设备字典`，新设备。当有新设备上线，立即发送订阅消息。
>	- 如果设备上报的数据，更新本地缓存的当前设备的上报时间，用于判断设备在线的依据。
> 3. 定时查询所有局域网内的在线设备状态
> 当设备最后一次上报数据的时间`大于4s`，表示设备已经不在线。
> 	- 本地设备维护字典中移除该设备
> 	- 执行设备掉线回调
> 	- 立刻发送一次订阅消息，尝试再次订阅该设备
>
> ###3. 取消订阅
	/**
	 * 取消订阅
	 */
	+ (void)stopLocalPush;

###相关类
-----
### ACLocalPushManager - 业务层主要使用此类完成订阅任务
> 局域网订阅管理器，主要功能如下：
>
> 	- 注册设备上下线回调
> 	- 注册设备上报数据回调
> 	- 发起订阅
> 	- 取消订阅

-----

### ACLocalPushActiveTask - sdk私有类
> 订阅消息任务类，主要功能如下：
>
> 	- 发起订阅请求，每60s发送一次
> 	- 停止发送订阅请求

-----

### ACLocalDeviceHeartbeatListenTask - sdk私有类
> 监听设备上报数据类，接收设备上报的数据，定义设备接收数据的协议。
>
> 	- 增加新上线设备，本地维护，并回调给业务层
> 	- 将上报数据回调给App业务层

----


### ACLocalOnlineDeviceManager - sdk私有类
> 维护上线设备列表，1s遍历一次设备列表中所有设备的在线状态，主要功能：
>
>	- 1s查询当前在线设备的状态，大于4s则认为设备已经掉线
>	- 维护上线设备列表（字典），增加，删除，更新最新上报时间

----
